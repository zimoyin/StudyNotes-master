

# 什么是单元测试
单元测试是对软件组成单元进行测试，其目的是检验软件基本组成单位的正确性，测试的对象是软件设计的最小单位：函数。


### 单元测试优点
1、它是一种验证行为。
程序中的每一项功能都是测试来验证它的正确性。它为以后的开发提供支援。就算是开发后期，我们也可以轻松的增加功能或更改程序结构，而不用担心这个过程中会破坏重要的东西。而且它为代码的重构提供了保障。这样，我们就可以更自由的对程序进行改进。
2、它是一种设计行为。
编写单元测试将使我们从调用者观察、思考。特别是先写测试（test-first），迫使我们把程序设计成易于调用和可测试的，即迫使我们解除软件中的耦合。
3、它是一种编写文档的行为。
单元测试是一种无价的文档，它是展示函数或类如何使用的最佳文档。这份文档是可编译、可运行的，并且它保持最新，永远与代码同步。
4、它具有回归性。
自动化的单元测试避免了代码出现回归，编写完成之后，可以随时随地的快速运行测试。



### 单元测试做什么？

* 接口功能性测试: 接口功能的正确性,即保证接口能够被正常调用，并输出有效数据!
例如：是否被顺利调用\参数是否符合预期
* 局部数据结构测试：保证数据结构的正确性
例如：变量是否有初始值或在某场景下是否有默认值\变量是否溢出
* 边界条件测试：测试  
  * 变量无赋值(null)  
  * 变量是数值或字符  
  * 主要边界：最大值，最小值，无穷大  
  * 溢出边界：在边界外面取值+/-1  
  * 临近边界：在边界值之内取值+/-1  
  * 字符串的边界，引用 "变量字符"的边界  
  * 字符串的设置，空字符串  
  * 字符串的应用长度测试  
  * 空白集合  
  * 目标集合的类型和应用边界  
  * 集合的次序  
  * 变量是规律的，测试无穷大的极限，无穷小的极限  
* 异常模块测试:(缺陷测试)，后续处理模块测试:是否包闭当前异常或者对异常形成消化,是否影响结果!  




# JUnit简介

JUnit 是用于编写和运行可重复的自动化测试的开源测试框架，这样可以保证我们的代码按预期工作。JUnit 可广泛用于工业和作为支架(从命令行)或IDE(如 IDEA)内单独的 Java 程序。

* 断言测试预期结果。  
* 测试功能共享通用的测试数据。  
* 测试套件轻松地组织和运行测试。  
* 图形和文本测试运行。  

JUnit 用于测试：

* 整个对象
* 对象的一部分 - 交互的方法或一些方法
* 几个对象之间的互动(交互)

# JUnit 特点

* JUnit 是用于编写和运行测试的开源框架。
* 提供了注释，以确定测试方法。
* 提供断言测试预期结果。
* 提供了测试运行的运行测试。
* JUnit 测试让您可以更快地编写代码，提高质量
* JUnit 是优雅简洁。它是不那么复杂以及不需要花费太多的时间。
* JUnit 测试可以自动运行，检查自己的结果，并提供即时反馈。没有必要通过测试结果报告来手动梳理。
* JUnit 测试可以组织成测试套件包含测试案例，甚至其他测试套件。
* Junit 显示测试进度的，如果** 测试是没有问题条形是绿色** 的，** 测试失败则会变成红色** 。** 如果断言失败会是黄色 **


## 安装junit
安装很简单，先到以下地址下载一个最新的zip包：
下载完以后解压到你喜欢的目录下，假设是JUNIT_HOME，然后将JUNIT_HOME下的junit.jar包加到你的系统的CLASSPATH环境变量中，对于IDE环境，对于需要用到的junit的项目增加到lib中，其设置不同的IDE有不同的设置** (其实大部分ide集成junit的,比如idea） **




## JUnit 注解
```java
@BeforeClass 全局只会执行一次，而且是第一个运行
@Before 在测试方法运行之前运行
@Test 测试方法
@After 在测试方法运行之后运行
@AfterClass 全局只会执行一次，而且是最后一个运行
@Ignore 忽略此方法
```


> @AfterClass和BeforeClass即是为了满足>> 测试中，那些体积非常大，但只要一次初> > 始化的代码块!
> ** 测试方法必须是静态 **  

## 注意：编写测试类的原则

```java
①测试方法上必须使用@Test进行修饰
②测试方法必须使用public void 进行修饰，不能带任何的参数
③新建一个源代码目录来存放我们的测试代码，即将测试代码和项目业务代码分开
④测试类所在的包名应该和被测试类所在的包名保持一致 
  如：
       被测试包：xxx.xxx.xxx
       测试包：xxx.xxx.text
⑤测试单元中的每个方法必须可以独立测试，测试方法间不能有任何的依赖
⑥测试类使用Test作为类名的后缀（不是必须）
⑦测试方法使用test作为方法名的前缀（不是必须）  

```


## JUnit 断言

> 断言是编程术语，表示为一些布尔表达式，程序员相信在程序中的某个特定点该表达式值为真，可以在任何时候启用和禁用断言验证，因此可以在测试时启用断言而在部署时禁用断言。同样，程序投入运行后，最终用户在遇到问题时可以重新启用断言。
> 使用断言可以创建更稳定、品质更好且 不易于出错的代码。当需要在一个值为 false 时中断当前操作的话，可以使用断言。单元测试必须使用断言（Junit/JunitX）。

> 可以理解为程序员敢（断言）说这个方法输出为1，而程序运行时输出1，那么程序员就断言成功了（true）





# 例子

```java

public class DoceText{

    @Before
    public void init (){
        System.out.println("init");
    }
    @After
    public void cold(){
        syso("233")
    }
    
    @Text
    public void add(){
        Calculator c = new  Calculator();
        int result = c.add(1, 2);//1+2
        //断言
        Assert.assertEquals(result, 3);
    }
}
```
输出：
```
init
true
233
```










